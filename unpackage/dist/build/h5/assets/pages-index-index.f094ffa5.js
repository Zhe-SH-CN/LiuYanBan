import{s as t,r as e,o as s,c as a,a as l,w as n,b as i,F as o,d as u,I as c,i as r,e as d,f as h,t as p,n as m}from"./index.ed0eaf82.js";var f=((t,e)=>{const s=t.__vccOpts||t;for(const[a,l]of e)s[a]=l;return s})({data:()=>({title:"Hello 张思哲",time:"",content:"",list:[],user:"",message:"Hello Vue!"}),onLoad(){t({title:"加载"}),this.timer=setInterval((()=>this.changeTime()),1e3),e.callFunction({name:"fun",data:{api:"getMessages"}}).then((t=>{this.list=t.result.data})),e.callFunction({name:"fun",data:{api:"check"}}).then((t=>{console.log(t)}))},onUnload(){clearInterval(this.timer)},methods:{changeTime(){this.time=(new Date).toLocaleString()},publish(){if(this.user||(this.user="匿名"),!this.content)return t({title:"请填写留言",icon:"error"}),this.user="",void(this.content="");e.callFunction({name:"fun",data:{api:"publish",content:this.content,user:this.user}}).then((t=>{console.log(t),this.list.push({_id:t.result.id,content:this.content,user:this.user}),this.content="",this.user=""}))}}},[["render",function(t,e,f,_,g,b){const V=c,v=r,x=d;return s(),a(o,null,[l(v,{class:"content"},{default:n((()=>[l(v,{class:"input-box"},{default:n((()=>[l(V,{type:"text",class:"input",modelValue:g.user,"onUpdate:modelValue":e[0]||(e[0]=t=>g.user=t),placeholder:"用户名(选填)"},null,8,["modelValue"]),l(V,{type:"text",class:"input",modelValue:g.content,"onUpdate:modelValue":e[1]||(e[1]=t=>g.content=t),placeholder:"留言"},null,8,["modelValue"])])),_:1}),l(x,{type:"primary",onClick:e[2]||(e[2]=t=>b.publish()),size:"default",class:"btn"},{default:n((()=>[i("发布")])),_:1})])),_:1}),(s(!0),a(o,null,u(g.list,((t,e)=>(s(),h(v,{key:t._id},{default:n((()=>[l(v,{class:m(["box","list-"+e%2])},{default:n((()=>[l(v,null,{default:n((()=>[i("用户："+p(t.user),1)])),_:2},1024),l(v,null,{default:n((()=>[i("留言："+p(t.content),1)])),_:2},1024)])),_:2},1032,["class"])])),_:2},1024)))),128))],64)}],["__scopeId","data-v-176729d6"]]);export{f as default};
